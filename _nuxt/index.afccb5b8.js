import{n as B,a as $}from"./entry.5817a581.js";import{C as k,z as t,A as i,B as _,J as g,M as d,u as n,X as f,Y as x,L as w,H as h,$ as L,a0 as M,a1 as C,l as S,I as V}from"./swiper-vue.31d3a669.js";import{_ as P,u as G,a as j}from"./useDefaultFetch.8826c8ab.js";import"./nuxt-link.df5112d9.js";const q={class:"xl:h-[43.75rem] overflow-hidden relative"},E=["src"],H={class:"absolute bottom-6 left-6 xl:bottom-16 xl:left-16"},D={class:"text-white font-bold text-2xl xl:text-4xl mb-5"},F={__name:"Poster",props:{movie:Object},setup(r){const p=r;return(e,o)=>{const c=k("Button");return t(),i("div",q,[_("img",{src:r.movie.large_cover_image,alt:"",class:"w-full"},null,8,E),_("div",H,[_("p",D,g(r.movie.title),1),d(c,{class:"w-[6.875rem]",label:"Info",severity:"secondary",onClick:o[0]||(o[0]=v=>("navigateTo"in e?e.navigateTo:n(B))(`/${p.movie.id}`))})])])}}},N={class:"text-xl xl:text-2xl font-bold"},O={__name:"MovieList",props:{movieList:{type:Object,required:!0}},setup(r){return(p,e)=>{const o=P,c=M,v=C;return t(),i("section",null,[(t(!0),i(f,null,x(r.movieList,(a,l)=>(t(),i("div",{key:l,class:"text-white [&+&]:mt-4"},[_("h3",N,g(l),1),d(v,{class:"mt-4",slidesPerView:"4",breakpoints:{1024:{slidesPerView:7},640:{slidesPerView:4},320:{slidesPerView:2}},spaceBetween:"30",modules:[n(L)],scrollbar:{hide:!0}},{default:w(()=>[(t(!0),i(f,null,x(a,m=>(t(),h(c,{key:m.id},{default:w(()=>[d(o,{id:m.id,src:m.medium_cover_image,title:m.title},null,8,["id","src","title"])]),_:2},1024))),128))]),_:2},1032,["modules"])]))),128))])}}},T={},I={class:"mt-4"},z={class:"flex gap-[30px]"};function A(r,p){const e=k("Skeleton");return t(),i("section",null,[d(e,{width:"12.5rem",height:"2rem"}),_("div",I,[_("div",z,[(t(),i(f,null,x(7,o=>d(e,{key:o,width:"14.5rem",height:"18.75rem",class:"hidden xl:block"})),64)),d(e,{width:"100%",height:"18.75rem",class:"block xl:hidden"})])])])}const J=$(T,[["render",A]]),K={class:"p-6 xl:p-16"},b="/v2/list_movies.json?minimum_rating=8.5&sort_by=rating&limit=50",R=S({__name:"index",setup(r){async function p(){const c={},a=await j(b),l=a.data.movies.reduce((s,u)=>(u.genres.forEach(y=>{s[y]=(s[y]||0)+1}),s),{});return Object.keys(l).filter(s=>l[s]>=6).forEach(s=>{c[s]=a.data.movies.filter(u=>u.genres.includes(s))}),{topMovies:a.data.movies[0],moviesByGenre:c}}const{data:e,isSuccess:o}=G({queryKey:[b],queryFn:p});return(c,v)=>{var s,u;const a=F,l=O,m=J;return t(),i("section",null,[n(o)&&((s=n(e))!=null&&s.topMovies)?(t(),h(a,{key:0,movie:n(e).topMovies},null,8,["movie"])):V("",!0),_("section",K,[n(o)&&((u=n(e))!=null&&u.moviesByGenre)?(t(),h(l,{key:0,movieList:n(e).moviesByGenre},null,8,["movieList"])):(t(),h(m,{key:1,class:"mt-8"}))])])}}});export{R as default};
