import{n as $,a as G}from"./entry.92a08d07.js";import{l as x,C as g,z as t,A as r,B as _,J as B,M as u,u as i,X as f,Y as y,L as k,H as p,$ as M,a0 as C,a1 as S,I as V}from"./swiper-vue.31d3a669.js";import{_ as P,u as L,a as E}from"./useDefaultFetch.abf102d9.js";import"./nuxt-link.10825522.js";const H={class:"xl:h-[43.75rem] overflow-hidden relative"},q=["src"],D={class:"absolute bottom-6 left-6 xl:bottom-16 xl:left-16"},F={id:"best_movie_title",class:"text-white font-bold text-2xl xl:text-4xl mb-5"},N=x({__name:"Poster",props:{movie:{}},setup(v){return(o,e)=>{const n=g("Button");return t(),r("div",H,[_("img",{src:o.movie.large_cover_image,alt:"",class:"w-full"},null,8,q),_("div",D,[_("p",F,B(o.movie.title),1),u(n,{class:"w-[6.875rem]",label:"Info",severity:"secondary",onClick:e[0]||(e[0]=m=>("navigateTo"in o?o.navigateTo:i($))(`/${o.movie.id}`))})])])}}}),T={class:"text-xl xl:text-2xl font-bold"},j=x({__name:"MovieList",props:{moviesByGenre:{}},setup(v){return(o,e)=>{const n=P,m=C,h=S;return t(),r("section",null,[(t(!0),r(f,null,y(o.moviesByGenre,(l,a)=>(t(),r("div",{key:a,class:"text-white [&+&]:mt-4"},[_("h3",T,B(a),1),u(h,{class:"mt-4",slidesPerView:4,breakpoints:{1024:{slidesPerView:7},640:{slidesPerView:4},320:{slidesPerView:2}},spaceBetween:"30",modules:[i(M)],scrollbar:{hide:!0}},{default:k(()=>[(t(!0),r(f,null,y(l,c=>(t(),p(m,{key:c.id,id:"movie_list"},{default:k(()=>[u(n,{id:c.id,src:c.medium_cover_image,title:c.title},null,8,["id","src","title"])]),_:2},1024))),128))]),_:2},1032,["modules"])]))),128))])}}}),I={},z={class:"mt-4"},A={class:"flex gap-[30px]"};function J(v,o){const e=g("Skeleton");return t(),r("section",null,[u(e,{width:"12.5rem",height:"2rem"}),_("div",z,[_("div",A,[(t(),r(f,null,y(7,n=>u(e,{key:n,width:"14.5rem",height:"18.75rem",class:"hidden xl:block"})),64)),u(e,{width:"100%",height:"18.75rem",class:"block xl:hidden"})])])])}const K=G(I,[["render",J]]),O={class:"p-6 xl:p-16"},b="/v2/list_movies.json?minimum_rating=8.5&sort_by=rating&limit=50",R=x({__name:"index",setup(v){async function o(){const m={},l=await E(b),a=l.data.movies.reduce((s,d)=>(d.genres.forEach(w=>{s[w]=(s[w]||0)+1}),s),{});return Object.keys(a).filter(s=>a[s]>=6).forEach(s=>{m[s]=l.data.movies.filter(d=>d.genres.includes(s))}),{topMovies:l.data.movies[0],moviesByGenre:m}}const{data:e,isSuccess:n}=L({queryKey:[b],queryFn:o});return(m,h)=>{var s,d;const l=N,a=j,c=K;return t(),r("section",null,[i(n)&&((s=i(e))!=null&&s.topMovies)?(t(),p(l,{key:0,movie:i(e).topMovies},null,8,["movie"])):V("",!0),_("section",O,[i(n)&&((d=i(e))!=null&&d.moviesByGenre)?(t(),p(a,{key:0,moviesByGenre:i(e).moviesByGenre},null,8,["moviesByGenre"])):(t(),p(c,{key:1,class:"mt-8"}))])])}}});export{R as default};
